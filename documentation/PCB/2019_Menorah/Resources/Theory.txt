The circuit is based on an Attiny84 microcontroller. This microcontroller controlls all LEDs except for the middle one on the high side(anode). On the low side(cathode), all LEDs are drived by a 2N3904 down to ground by the microcontroller. There is a copper pad in in the middle of the "candle", which serves as the capacitance touch pad. The CapacitiveTouch library is used in conjunction with a pre-determined threshold value to determine when the pad has been pressed or not. When pressed, the Attiny increments the number of LEDs on from left to right, like a real Menorah. All the LEDs are beign constantly drived in a matter that appears like they are a candle.